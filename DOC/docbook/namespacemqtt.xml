<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="_namespacemqtt" xml:lang="en-US">
<title>mqtt Namespace Reference</title>
<indexterm><primary>mqtt</primary></indexterm>
<simplesect>
    <title>Functions    </title>
        <itemizedlist>
            <listitem><para>def <link linkend="_namespacemqtt_1ac56cb403c0e00a184e8d17c5b17844d1">connect_mqtt</link> ()</para>
</listitem>
            <listitem><para>def <link linkend="_namespacemqtt_1ade0576775e7ca369a2fe649952b99a15">publish</link> (client)</para>
</listitem>
            <listitem><para>def <link linkend="_namespacemqtt_1a7e05d49b2ec875b812003fe651339658">run</link> ()</para>
</listitem>
        </itemizedlist>
</simplesect>
<simplesect>
    <title>Variables    </title>
        <itemizedlist>
            <listitem><para>string <link linkend="_namespacemqtt_1a6ea40616dbcf7aa672effa8c9698e91e">broker</link> = &apos;broker.emqx.io&apos;</para>
</listitem>
            <listitem><para>int <link linkend="_namespacemqtt_1a2761d8d2d50d93a8e528737fbe95167e">port</link> = 1883</para>
</listitem>
            <listitem><para>string <link linkend="_namespacemqtt_1a71cb992573d174ca8319de2c53c274c9">topic</link> = &quot;python/mqtt&quot;</para>
</listitem>
            <listitem><para>string <link linkend="_namespacemqtt_1a5e7c086d73fb9df1bddb16348af24f70">client_id</link> = f&apos;python-mqtt-{random.randint(0, 1000)}&apos;</para>
</listitem>
        </itemizedlist>
</simplesect>
<section>
<title>Function Documentation</title>
<anchor xml:id="_namespacemqtt_1ac56cb403c0e00a184e8d17c5b17844d1"/><section>
    <title>connect_mqtt()</title>
<indexterm><primary>connect_mqtt</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>connect_mqtt</secondary></indexterm>
<para><computeroutput>def mqtt.connect_mqtt ( )</computeroutput></para><programlisting linenumbering="unnumbered">00018 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespacemqtt_1ac56cb403c0e00a184e8d17c5b17844d1">connect_mqtt</link>():
00019 &#32;&#32;&#32;&#32;<emphasis role="keyword">def&#32;</emphasis>on_connect(client,&#32;userdata,&#32;flags,&#32;rc):
00020 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;rc&#32;==&#32;0:
00021 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis role="stringliteral">&quot;Connected&#32;to&#32;MQTT&#32;Broker!&quot;</emphasis>)
00022 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
00023 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(<emphasis role="stringliteral">&quot;Failed&#32;to&#32;connect,&#32;return&#32;code&#32;%d\n&quot;</emphasis>,&#32;rc)
00024 
00025 &#32;&#32;&#32;&#32;client&#32;=&#32;mqtt_client.Client(client_id)
00026 &#32;&#32;&#32;&#32;client.username_pw_set(username,&#32;password)
00027 &#32;&#32;&#32;&#32;client.on_connect&#32;=&#32;on_connect
00028 &#32;&#32;&#32;&#32;client.connect(broker,&#32;port)
00029 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">return</emphasis>&#32;client
00030 
00031 
</programlisting><para>
Referenced by <link linkend="_l00047">run()</link>.</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="namespacemqtt_ac56cb403c0e00a184e8d17c5b17844d1_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_namespacemqtt_1ade0576775e7ca369a2fe649952b99a15"/><section>
    <title>publish()</title>
<indexterm><primary>publish</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>publish</secondary></indexterm>
<para><computeroutput>def mqtt.publish ( client)</computeroutput></para><programlisting linenumbering="unnumbered">00032 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespacemqtt_1ade0576775e7ca369a2fe649952b99a15">publish</link>(client):
00033 &#32;&#32;&#32;&#32;msg_count&#32;=&#32;0
00034 &#32;&#32;&#32;&#32;<emphasis role="keywordflow">while</emphasis>&#32;<emphasis role="keyword">True</emphasis>:
00035 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;time.sleep(1)
00036 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;msg&#32;=&#32;f<emphasis role="stringliteral">&quot;messages:&#32;{msg_count}&quot;</emphasis>
00037 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;result&#32;=&#32;client.publish(topic,&#32;msg)
00038 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">#&#32;result:&#32;[0,&#32;1]</emphasis>
00039 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;status&#32;=&#32;result[0]
00040 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">if</emphasis>&#32;status&#32;==&#32;0:
00041 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;Send&#32;`{msg}`&#32;to&#32;topic&#32;`{topic}`&quot;</emphasis>)
00042 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="keywordflow">else</emphasis>:
00043 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;print(f<emphasis role="stringliteral">&quot;Failed&#32;to&#32;send&#32;message&#32;to&#32;topic&#32;{topic}&quot;</emphasis>)
00044 &#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;msg_count&#32;+=&#32;1
00045 
00046 
</programlisting><para>
Referenced by <link linkend="_l00047">run()</link>.</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="namespacemqtt_ade0576775e7ca369a2fe649952b99a15_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
<anchor xml:id="_namespacemqtt_1a7e05d49b2ec875b812003fe651339658"/><section>
    <title>run()</title>
<indexterm><primary>run</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>run</secondary></indexterm>
<para><computeroutput>def mqtt.run ( )</computeroutput></para><programlisting linenumbering="unnumbered">00047 <emphasis role="keyword">def&#32;</emphasis><link linkend="_namespacemqtt_1a7e05d49b2ec875b812003fe651339658">run</link>():
00048 &#32;&#32;&#32;&#32;client&#32;=&#32;<link linkend="_namespacemqtt_1ac56cb403c0e00a184e8d17c5b17844d1">connect_mqtt</link>()
00049 &#32;&#32;&#32;&#32;client.loop_start()
00050 &#32;&#32;&#32;&#32;<link linkend="_namespacemqtt_1ade0576775e7ca369a2fe649952b99a15">publish</link>(client)
00051 
00052 
</programlisting><para>
References <link linkend="_l00018">connect_mqtt()</link>, <link linkend="_l00032">publish()</link>, and <link linkend="_l00047">run()</link>.</para>
<para>
Referenced by <link linkend="_l00047">run()</link>.</para>
Here is the call graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="namespacemqtt_a7e05d49b2ec875b812003fe651339658_cgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
Here is the caller graph for this function:<para>
    <informalfigure>
        <mediaobject>
            <imageobject>
                <imagedata width="50%" align="center" valign="middle" scalefit="0" fileref="namespacemqtt_a7e05d49b2ec875b812003fe651339658_icgraph.png"></imagedata>
            </imageobject>
        </mediaobject>
    </informalfigure>
</para>
</section>
</section>
<section>
<title>Variable Documentation</title>
<anchor xml:id="_namespacemqtt_1a6ea40616dbcf7aa672effa8c9698e91e"/><section>
    <title>broker</title>
<indexterm><primary>broker</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>broker</secondary></indexterm>
<para><computeroutput>string mqtt.broker = &apos;broker.emqx.io&apos;</computeroutput></para></section>
<anchor xml:id="_namespacemqtt_1a5e7c086d73fb9df1bddb16348af24f70"/><section>
    <title>client_id</title>
<indexterm><primary>client_id</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>client_id</secondary></indexterm>
<para><computeroutput>string mqtt.client_id = f&apos;python-mqtt-{random.randint(0, 1000)}&apos;</computeroutput></para></section>
<anchor xml:id="_namespacemqtt_1a2761d8d2d50d93a8e528737fbe95167e"/><section>
    <title>port</title>
<indexterm><primary>port</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>port</secondary></indexterm>
<para><computeroutput>int mqtt.port = 1883</computeroutput></para></section>
<anchor xml:id="_namespacemqtt_1a71cb992573d174ca8319de2c53c274c9"/><section>
    <title>topic</title>
<indexterm><primary>topic</primary><secondary>mqtt</secondary></indexterm>
<indexterm><primary>mqtt</primary><secondary>topic</secondary></indexterm>
<para><computeroutput>string mqtt.topic = &quot;python/mqtt&quot;</computeroutput></para></section>
</section>
</section>
